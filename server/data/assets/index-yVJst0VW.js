var ht=Object.defineProperty;var pt=(t,e,n)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _e=(t,e,n)=>(pt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function M(){}const ke=t=>t;function ye(t,e){for(const n in e)t[n]=e[n];return t}function Ke(t){return t()}function Ne(){return Object.create(null)}function z(t){t.forEach(Ke)}function K(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _t(t){return Object.keys(t).length===0}function me(t,...e){if(t==null){for(const s of e)s(void 0);return M}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Oe(t){let e;return me(t,n=>e=n)(),e}function U(t,e,n){t.$$.on_destroy.push(me(e,n))}function Ve(t,e,n,s){if(t){const r=Ge(t,e,n,s);return t[0](r)}}function Ge(t,e,n,s){return t[1]&&s?ye(n.ctx.slice(),t[1](s(e))):n.ctx}function Ye(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],u=Math.max(e.dirty.length,r.length);for(let o=0;o<u;o+=1)i[o]=e.dirty[o]|r[o];return i}return e.dirty|r}return e.dirty}function Qe(t,e,n,s,r,i){if(r){const u=Ge(e,n,s,i);t.p(u,r)}}function We(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Xe(t,e,n){return t.set(n),e}function Re(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Ze=typeof window<"u";let xe=Ze?()=>window.performance.now():()=>Date.now(),Se=Ze?t=>requestAnimationFrame(t):M;const Q=new Set;function et(t){Q.forEach(e=>{e.c(t)||(Q.delete(e),e.f())}),Q.size!==0&&Se(et)}function tt(t){let e;return Q.size===0&&Se(et),{promise:new Promise(n=>{Q.add(e={c:t,f:n})}),abort(){Q.delete(e)}}}function w(t,e){t.appendChild(e)}function nt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function bt(t){const e=k("style");return e.textContent="/* empty */",yt(nt(t),e),e.sheet}function yt(t,e){return w(t.head||t,e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function $t(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function Ce(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function I(t){return document.createTextNode(t)}function N(){return I(" ")}function Le(){return I("")}function H(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ge(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vt(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function ue(t,e){t.value=e??""}function Ae(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function je(t,e,n){t.classList.toggle(e,!!n)}function st(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}const ae=new Map;let fe=0;function wt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function kt(t,e){const n={stylesheet:bt(e),rules:{}};return ae.set(t,n),n}function rt(t,e,n,s,r,i,u,o=0){const l=16.666/s;let a=`{
`;for(let v=0;v<=1;v+=l){const b=e+(n-e)*i(v);a+=v*100+`%{${u(b,1-b)}}
`}const f=a+`100% {${u(n,1-n)}}
}`,d=`__svelte_${wt(f)}_${o}`,c=nt(t),{stylesheet:m,rules:h}=ae.get(c)||kt(c,t);h[d]||(h[d]=!0,m.insertRule(`@keyframes ${d} ${f}`,m.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${d} ${s}ms linear ${r}ms 1 both`,fe+=1,d}function $e(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(t.style.animation=s.join(", "),fe-=r,fe||St())}function St(){Se(()=>{fe||(ae.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&S(e)}),ae.clear())})}let te;function ee(t){te=t}function ie(){if(!te)throw new Error("Function called outside component initialization");return te}function Lt(t){ie().$$.before_update.push(t)}function Tt(t){ie().$$.on_mount.push(t)}function Et(t){ie().$$.after_update.push(t)}function Mt(t){ie().$$.on_destroy.push(t)}function Te(){const t=ie();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=st(e,n,{cancelable:s});return r.slice().forEach(u=>{u.call(t,i)}),!i.defaultPrevented}return!0}}const Y=[],J=[];let W=[];const ve=[],Nt=Promise.resolve();let we=!1;function Ot(){we||(we=!0,Nt.then(lt))}function q(t){W.push(t)}function it(t){ve.push(t)}const be=new Set;let V=0;function lt(){if(V!==0)return;const t=te;do{try{for(;V<Y.length;){const e=Y[V];V++,ee(e),Rt(e.$$)}}catch(e){throw Y.length=0,V=0,e}for(ee(null),Y.length=0,V=0;J.length;)J.pop()();for(let e=0;e<W.length;e+=1){const n=W[e];be.has(n)||(be.add(n),n())}W.length=0}while(Y.length);for(;ve.length;)ve.pop()();we=!1,be.clear(),ee(t)}function Rt(t){if(t.fragment!==null){t.update(),z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}function Ct(t){const e=[],n=[];W.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),W=e}let x;function ot(){return x||(x=Promise.resolve(),x.then(()=>{x=null})),x}function ce(t,e,n){t.dispatchEvent(st(`${e?"intro":"outro"}${n}`))}const oe=new Set;let D;function ne(){D={r:0,c:[],p:D}}function se(){D.r||z(D.c),D=D.p}function $(t,e){t&&t.i&&(oe.delete(t),t.i(e))}function L(t,e,n,s){if(t&&t.o){if(oe.has(t))return;oe.add(t),D.c.push(()=>{oe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const ut={duration:0};function he(t,e,n){const s={direction:"in"};let r=e(t,n,s),i=!1,u,o,l=0;function a(){u&&$e(t,u)}function f(){const{delay:c=0,duration:m=300,easing:h=ke,tick:y=M,css:v}=r||ut;v&&(u=rt(t,0,1,m,c,h,v,l++)),y(0,1);const b=xe()+c,_=b+m;o&&o.abort(),i=!0,q(()=>ce(t,!0,"start")),o=tt(p=>{if(i){if(p>=_)return y(1,0),ce(t,!0,"end"),a(),i=!1;if(p>=b){const E=h((p-b)/m);y(E,1-E)}}return i})}let d=!1;return{start(){d||(d=!0,$e(t),K(r)?(r=r(s),ot().then(f)):f())},invalidate(){d=!1},end(){i&&(a(),i=!1)}}}function pe(t,e,n){const s={direction:"out"};let r=e(t,n,s),i=!0,u;const o=D;o.r+=1;let l;function a(){const{delay:f=0,duration:d=300,easing:c=ke,tick:m=M,css:h}=r||ut;h&&(u=rt(t,1,0,d,f,c,h));const y=xe()+f,v=y+d;q(()=>ce(t,!1,"start")),"inert"in t&&(l=t.inert,t.inert=!0),tt(b=>{if(i){if(b>=v)return m(0,1),ce(t,!1,"end"),--o.r||z(o.c),!1;if(b>=y){const _=c((b-y)/d);m(1-_,_)}}return i})}return K(r)?ot().then(()=>{r=r(s),a()}):a(),{end(f){f&&"inert"in t&&(t.inert=l),f&&r.tick&&r.tick(1,0),i&&(u&&$e(t,u),i=!1)}}}function Be(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function at(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function C(t){t&&t.c()}function O(t,e,n){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),q(()=>{const i=t.$$.on_mount.map(Ke).filter(K);t.$$.on_destroy?t.$$.on_destroy.push(...i):z(i),t.$$.on_mount=[]}),r.forEach(q)}function R(t,e){const n=t.$$;n.fragment!==null&&(Ct(n.after_update),z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function At(t,e){t.$$.dirty[0]===-1&&(Y.push(t),Ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,s,r,i,u=null,o=[-1]){const l=te;ee(t);const a=t.$$={fragment:null,ctx:[],props:i,update:M,not_equal:r,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Ne(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};u&&u(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,c,...m)=>{const h=m.length?m[0]:c;return a.ctx&&r(a.ctx[d],a.ctx[d]=h)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](h),f&&At(t,d)),c}):[],a.update(),f=!0,z(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const d=vt(e.target);a.fragment&&a.fragment.l(d),d.forEach(S)}else a.fragment&&a.fragment.c();e.intro&&$(t.$$.fragment),O(t,e.target,e.anchor),lt()}ee(l)}class P{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){R(this,1),this.$destroy=M}$on(e,n){if(!K(n))return M;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!_t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jt);function Bt(t){let e;return{c(){e=k("footer"),e.innerHTML=`See
  <a href="https://github.com/blaine/couloir">Github</a> <br/>`,g(e,"class","svelte-1mrysg1")},m(n,s){T(n,e,s)},p:M,i:M,o:M,d(n){n&&S(e)}}}class Pt extends P{constructor(e){super(),B(this,e,null,Bt,j,{})}}const G=[];function Ht(t,e){return{subscribe:Ee(t,e).subscribe}}function Ee(t,e=M){let n;const s=new Set;function r(o){if(j(t,o)&&(t=o,n)){const l=!G.length;for(const a of s)a[1](),G.push(a,t);if(l){for(let a=0;a<G.length;a+=2)G[a][0](G[a+1]);G.length=0}}}function i(o){r(o(t))}function u(o,l=M){const a=[o,l];return s.add(a),s.size===1&&(n=e(r,i)||M),o(t),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:u}}function qt(t,e,n){const s=!Array.isArray(t),r=s?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Ht(n,(u,o)=>{let l=!1;const a=[];let f=0,d=M;const c=()=>{if(f)return;d();const h=e(s?a[0]:a,u,o);i?u(h):d=K(h)?h:M},m=r.map((h,y)=>me(h,v=>{a[y]=v,f&=~(1<<y),l&&c()},()=>{f|=1<<y}));return l=!0,c(),function(){z(m),d(),l=!1}})}function ft({storageKey:t,initialValue:e=""}){const n=localStorage.getItem(t)||e,{subscribe:s,update:r,set:i}=Ee(n);return s(u=>{u&&localStorage.setItem(t,u)}),{subscribe:s,update:r,set:i}}const de=ft({storageKey:"chat_nav",initialValue:"messages"}),X=ft({storageKey:"chat_user"});class Z{constructor(e,n,s,r=!1){this.message=e,this.user=n,this.time=s,this.sent=r}static from({message:e,user:n,time:s,sent:r=!0}){return new Z(e,n,s,r)}equalTo(e){return this.message===e.message&&this.user===e.user&&this.time===e.time}withSentStatus(e){return new Z(this.message,this.user,this.time,e)}toJSON(){return{message:this.message,user:this.user,time:this.time}}async toHash(){const e=JSON.stringify(this),n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(s)).map(i=>i.toString(16).padStart(2,"0")).join("")}}function Dt(){const t=Ee([]),{subscribe:e,update:n,set:s}=t,r=async()=>{const o=Oe(t).map(Z.from).filter(l=>!l.sent);for(const l of o){const a=await fetch("/messages",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json; charset=UTF-8"}});n(f=>f.map(d=>d.equalTo(l)?l.withSentStatus(a.ok):d))}},i=async()=>{const l=await(await fetch("/messages-list")).text(),a=l===""?[]:l.split(`
`),f=await Promise.all(Oe(t).map(Z.from).map(async b=>await b.toHash()));let d=[],c=-1,m=-1;for(let b=0;b<a.length;b++)f.includes(a[b])?(c!==-1&&d.push(`${c}-${m}`),c=-1):(c===-1&&(c=b),m=b);if(c!==-1&&d.push(`${c}-${m}`),d.length===0)return;const h=await fetch(`/messages?q=${d.join(",")}`,{headers:{"if-match":`${a.length}`}});if(h.status!==200)throw new Error(await h.text());const v=(await h.text()).split(`
`).filter(b=>b!="").map(b=>JSON.parse(b));n(b=>[...b,...v])},u=async()=>{await i(),await r()};return{subscribe:e,send:async o=>{const l=await fetch("/messages",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json; charset=UTF-8"}});n(a=>[...a,o.withSentStatus(l.ok)])},init:async()=>(s([]),await i()),poll:()=>setInterval(u,1e3),refresh:u}}function ct(t){const e=t-1;return e*e*e+1}function It(t){return--t*t*t*t*t+1}function re(t,{delay:e=0,duration:n=400,easing:s=ke}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:i=>`opacity: ${i*r}`}}function Pe(t,{delay:e=0,duration:n=400,easing:s=ct,x:r=0,y:i=0,opacity:u=0}={}){const o=getComputedStyle(t),l=+o.opacity,a=o.transform==="none"?"":o.transform,f=l*(1-u),[d,c]=Re(r),[m,h]=Re(i);return{delay:e,duration:n,easing:s,css:(y,v)=>`
			transform: ${a} translate(${(1-y)*d}${c}, ${(1-y)*m}${h});
			opacity: ${l-f*v}`}}function Ut({fallback:t,...e}){const n=new Map,s=new Map;function r(u,o,l){const{delay:a=0,duration:f=F=>Math.sqrt(F)*30,easing:d=ct}=ye(ye({},e),l),c=u.getBoundingClientRect(),m=o.getBoundingClientRect(),h=c.left-m.left,y=c.top-m.top,v=c.width/m.width,b=c.height/m.height,_=Math.sqrt(h*h+y*y),p=getComputedStyle(o),E=p.transform==="none"?"":p.transform,A=+p.opacity;return{delay:a,duration:K(f)?f(_):f,easing:d,css:(F,Me)=>`
				opacity: ${F*A};
				transform-origin: top left;
				transform: ${E} translate(${Me*h}px,${Me*y}px) scale(${F+(1-F)*v}, ${F+(1-F)*b});
			`}}function i(u,o,l){return(a,f)=>(u.set(f.key,a),()=>{if(o.has(f.key)){const d=o.get(f.key);return o.delete(f.key),r(d,a,f)}return u.delete(f.key),t&&t(a,f,l)})}return[i(s,n,!1),i(n,s,!0)]}function zt(t){let e,n,s;return{c(){e=k("input"),e.disabled=t[6],g(e,"class","input svelte-c4fbvv"),g(e,"type","text"),g(e,"maxlength",t[5]),g(e,"name",t[4]),g(e,"aria-labelledby",t[1]),g(e,"aria-label",t[2]),g(e,"placeholder",t[3])},m(r,i){T(r,e,i),ue(e,t[0]),n||(s=H(e,"input",t[14]),n=!0)},p(r,i){i&64&&(e.disabled=r[6]),i&32&&g(e,"maxlength",r[5]),i&16&&g(e,"name",r[4]),i&2&&g(e,"aria-labelledby",r[1]),i&4&&g(e,"aria-label",r[2]),i&8&&g(e,"placeholder",r[3]),i&1&&e.value!==r[0]&&ue(e,r[0])},d(r){r&&S(e),n=!1,s()}}}function Ft(t){let e,n,s;return{c(){e=k("textarea"),e.disabled=t[6],g(e,"rows",t[9]),g(e,"class","input svelte-c4fbvv"),g(e,"maxlength",t[5]),g(e,"name",t[4]),g(e,"aria-labelledby",t[1]),g(e,"aria-label",t[2]),g(e,"placeholder",t[3])},m(r,i){T(r,e,i),t[12](e),ue(e,t[0]),n||(s=[H(e,"input",t[13]),H(e,"keypress",Vt)],n=!0)},p(r,i){i&64&&(e.disabled=r[6]),i&512&&g(e,"rows",r[9]),i&32&&g(e,"maxlength",r[5]),i&16&&g(e,"name",r[4]),i&2&&g(e,"aria-labelledby",r[1]),i&4&&g(e,"aria-label",r[2]),i&8&&g(e,"placeholder",r[3]),i&1&&ue(e,r[0])},d(r){r&&S(e),t[12](null),n=!1,z(s)}}}function He(t){let e,n,s,r;return{c(){e=k("input"),g(e,"class","submit svelte-c4fbvv"),g(e,"type","submit"),e.value="Send"},m(i,u){T(i,e,u),r=!0},i(i){r||(i&&q(()=>{r&&(s&&s.end(1),n=he(e,re,{}),n.start())}),r=!0)},o(i){n&&n.invalidate(),i&&(s=pe(e,re,{})),r=!1},d(i){i&&S(e),i&&s&&s.end()}}}function Jt(t){let e,n;function s(o,l){return o[7]?Ft:zt}let r=s(t),i=r(t),u=t[0]&&He();return{c(){e=k("div"),i.c(),n=N(),u&&u.c(),g(e,"class","input-with-button svelte-c4fbvv")},m(o,l){T(o,e,l),i.m(e,null),w(e,n),u&&u.m(e,null)},p(o,[l]){r===(r=s(o))&&i?i.p(o,l):(i.d(1),i=r(o),i&&(i.c(),i.m(e,n))),o[0]?u?l&1&&$(u,1):(u=He(),u.c(),$(u,1),u.m(e,null)):u&&(ne(),L(u,1,1,()=>{u=null}),se())},i(o){$(u)},o(o){L(u)},d(o){o&&S(e),i.d(),u&&u.d()}}}const Kt=40;function Vt(t){if(t.code==="Enter"&&!t.shiftKey&&t.target){const{form:e}=t.target;e.dispatchEvent(new Event("submit",{cancelable:!0})),t.preventDefault()}}function Gt(t,e,n){let s,{ariaLabelledBy:r=""}=e,{ariaLabel:i=""}=e,{placeholder:u=""}=e,{value:o=""}=e,{name:l=""}=e,{maxlength:a=160}=e,{maxRows:f=1}=e,{disabled:d=!1}=e,{multiline:c=!1}=e,m;const h=()=>{m.focus()};function y(p){let E=Math.floor(p.length/Kt)+1;const A=(p.match(/\n/g)||[]).length;return E+=A,Math.min(f,E)}function v(p){J[p?"unshift":"push"](()=>{m=p,n(8,m)})}function b(){o=this.value,n(0,o)}function _(){o=this.value,n(0,o)}return t.$$set=p=>{"ariaLabelledBy"in p&&n(1,r=p.ariaLabelledBy),"ariaLabel"in p&&n(2,i=p.ariaLabel),"placeholder"in p&&n(3,u=p.placeholder),"value"in p&&n(0,o=p.value),"name"in p&&n(4,l=p.name),"maxlength"in p&&n(5,a=p.maxlength),"maxRows"in p&&n(10,f=p.maxRows),"disabled"in p&&n(6,d=p.disabled),"multiline"in p&&n(7,c=p.multiline)},t.$$.update=()=>{t.$$.dirty&1&&n(9,s=y(o))},[o,r,i,u,l,a,d,c,m,s,f,h,v,b,_]}class dt extends P{constructor(e){super(),B(this,e,Gt,Jt,j,{ariaLabelledBy:1,ariaLabel:2,placeholder:3,value:0,name:4,maxlength:5,maxRows:10,disabled:6,multiline:7,focus:11})}get focus(){return this.$$.ctx[11]}}function Yt(t){let e,n,s,r,i,u,o;function l(f){t[4](f)}let a={multiline:!0,disabled:!t[2],maxRows:3,placeholder:"Message",ariaLabel:"Message"};return t[0]!==void 0&&(a.value=t[0]),s=new dt({props:a}),J.push(()=>at(s,"value",l)),t[5](s),{c(){e=k("div"),n=k("form"),C(s.$$.fragment),g(n,"method","get"),g(n,"autocomplete","off"),g(n,"class","svelte-1djjhy7"),g(e,"class","svelte-1djjhy7")},m(f,d){T(f,e,d),w(e,n),O(s,n,null),i=!0,u||(o=H(n,"submit",ge(t[6])),u=!0)},p(f,[d]){const c={};d&4&&(c.disabled=!f[2]),!r&&d&1&&(r=!0,c.value=f[0],it(()=>r=!1)),s.$set(c)},i(f){i||($(s.$$.fragment,f),i=!0)},o(f){L(s.$$.fragment,f),i=!1},d(f){f&&S(e),t[5](null),R(s),u=!1,o()}}}function Qt(t,e,n){let s;U(t,X,f=>n(2,s=f));const r=Te();let i="",u;function o(f){i=f,n(0,i)}function l(f){J[f?"unshift":"push"](()=>{u=f,n(1,u)})}return[i,u,s,r,o,l,f=>{i.trim()&&(r("message",i),n(0,i=""),u.focus())}]}class Wt extends P{constructor(e){super(),B(this,e,Qt,Yt,j,{})}}function qe(t){if(!t)return;const e={hue:[60,360],sat:[75,100],lum:[70,71]};function n(o,l,a){const f=a-l;return(o%f+f)%f+l}let s=0;for(let o=0;o<t.length;o++)s=t.charCodeAt(o)+((s<<5)-s),s=s&s;let r=n(s,e.hue[0],e.hue[1]),i=n(s,e.sat[0],e.sat[1]),u=n(s,e.lum[0],e.lum[1]);return`hsl(${r}, ${i}%, ${u}%)`}function De(t,e,n){const s=t.slice();return s[7]=e[n],s}function Ie(t){let e,n,s;function r(){return t[5](t[7])}return{c(){e=k("button"),e.textContent="delete",g(e,"class","delete svelte-n2su4y")},m(i,u){T(i,e,u),n||(s=H(e,"click",ge(r)),n=!0)},p(i,u){t=i},d(i){i&&S(e),n=!1,s()}}}function Ue(t){let e,n,s,r=new Date(parseFloat(t[7].time)).toLocaleString("en-US",{hour12:!1})+"",i,u,o,l=t[7].user+"",a,f,d,c=t[7].message+"",m,h,y,v,b,_,p=t[7].user===t[2]&&Ie(t);return{c(){e=k("article"),n=k("div"),s=k("span"),i=I(r),u=N(),o=k("span"),a=I(l),f=N(),d=k("div"),m=I(c),h=N(),p&&p.c(),y=N(),g(s,"class","time"),g(o,"class","user svelte-n2su4y"),g(n,"class","meta svelte-n2su4y"),g(d,"class","msg svelte-n2su4y"),Ae(d,"background-color",t[7].user!==t[2]&&qe(t[7].user)),g(e,"class","svelte-n2su4y"),je(e,"user",t[7].user===t[2])},m(E,A){T(E,e,A),w(e,n),w(n,s),w(s,i),w(n,u),w(n,o),w(o,a),w(e,f),w(e,d),w(d,m),w(d,h),p&&p.m(d,null),w(e,y),_=!0},p(E,A){t=E,(!_||A&2)&&r!==(r=new Date(parseFloat(t[7].time)).toLocaleString("en-US",{hour12:!1})+"")&&le(i,r),(!_||A&2)&&l!==(l=t[7].user+"")&&le(a,l),(!_||A&2)&&c!==(c=t[7].message+"")&&le(m,c),t[7].user===t[2]?p?p.p(t,A):(p=Ie(t),p.c(),p.m(d,null)):p&&(p.d(1),p=null),(!_||A&6)&&Ae(d,"background-color",t[7].user!==t[2]&&qe(t[7].user)),(!_||A&6)&&je(e,"user",t[7].user===t[2])},i(E){_||(E&&q(()=>{_&&(b&&b.end(1),v=he(e,re,{}),v.start())}),_=!0)},o(E){v&&v.invalidate(),E&&(b=pe(e,t[4],{key:t[7].msgId})),_=!1},d(E){E&&S(e),p&&p.d(),E&&b&&b.end()}}}function Xt(t){let e,n,s=Be(t[1]),r=[];for(let u=0;u<s.length;u+=1)r[u]=Ue(De(t,s,u));const i=u=>L(r[u],1,1,()=>{r[u]=null});return{c(){for(let u=0;u<r.length;u+=1)r[u].c();e=Le()},m(u,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(u,o);T(u,e,o),n=!0},p(u,[o]){if(o&14){s=Be(u[1]);let l;for(l=0;l<s.length;l+=1){const a=De(u,s,l);r[l]?(r[l].p(a,o),$(r[l],1)):(r[l]=Ue(a),r[l].c(),$(r[l],1),r[l].m(e.parentNode,e))}for(ne(),l=s.length;l<r.length;l+=1)i(l);se()}},i(u){if(!n){for(let o=0;o<s.length;o+=1)$(r[o]);n=!0}},o(u){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)L(r[o]);n=!1},d(u){u&&S(e),$t(r,u)}}}function Zt(t,e,n){let s,r=M,i=()=>(r(),r=me(l,c=>n(1,s=c)),l),u;U(t,X,c=>n(2,u=c)),t.$$.on_destroy.push(()=>r());const o=Te();let{messages:l}=e;i();const[a,f]=Ut({duration:c=>Math.sqrt(c*200),fallback(c,m){const h=getComputedStyle(c),y=h.transform==="none"?"":h.transform;return{duration:600,easing:It,css:v=>`
          transform: ${y} scale(${v});
          opacity: ${v}
				`}}}),d=c=>{confirm("Are you sure?")&&o("delete",c.msgId)};return t.$$set=c=>{"messages"in c&&i(n(0,l=c.messages))},[l,s,u,o,a,d]}class xt extends P{constructor(e){super(),B(this,e,Zt,Xt,j,{messages:0})}}function en(t){let e,n,s,r,i,u,o;return{c(){e=k("div"),n=k("button"),n.textContent="↓",g(n,"class","svelte-1co9mdl"),g(e,"class","svelte-1co9mdl")},m(l,a){T(l,e,a),w(e,n),i=!0,u||(o=H(n,"click",ge(function(){K(t[0])&&t[0].apply(this,arguments)})),u=!0)},p(l,[a]){t=l},i(l){i||(l&&q(()=>{i&&(r&&r.end(1),s=he(e,Pe,{x:20,duration:200}),s.start())}),i=!0)},o(l){s&&s.invalidate(),l&&(r=pe(e,Pe,{x:20,duration:200})),i=!1},d(l){l&&S(e),l&&r&&r.end(),u=!1,o()}}}function tn(t,e,n){let{onScroll:s}=e;return t.$$set=r=>{"onScroll"in r&&n(0,s=r.onScroll)},[s]}class nn extends P{constructor(e){super(),B(this,e,tn,en,j,{onScroll:0})}}function sn(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="loadingspinner"></div>',g(e,"class","centered")},m(n,s){T(n,e,s)},p:M,i:M,o:M,d(n){n&&S(e)}}}class rn extends P{constructor(e){super(),B(this,e,null,sn,j,{})}}function ze(t){let e,n;return e=new rn({}),{c(){C(e.$$.fragment)},m(s,r){O(e,s,r),n=!0},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function Fe(t){let e,n;return e=new nn({props:{onScroll:t[5]}}),{c(){C(e.$$.fragment)},m(s,r){O(e,s,r),n=!0},p:M,i(s){n||($(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function ln(t){let e,n,s,r,i,u,o,l,a,f,d=t[2]&&ze();s=new xt({props:{messages:t[4]}}),s.$on("delete",t[8]),i=new Wt({}),i.$on("message",t[10]);let c=t[0]&&Fe(t);return{c(){e=k("main"),d&&d.c(),n=N(),C(s.$$.fragment),r=N(),C(i.$$.fragment),u=N(),c&&c.c(),o=Le(),g(e,"class","svelte-i15h9r")},m(m,h){T(m,e,h),d&&d.m(e,null),w(e,n),O(s,e,null),t[9](e),T(m,r,h),O(i,m,h),T(m,u,h),c&&c.m(m,h),T(m,o,h),l=!0,a||(f=H(e,"scroll",t[6]),a=!0)},p(m,[h]){m[2]?d?h&4&&$(d,1):(d=ze(),d.c(),$(d,1),d.m(e,n)):d&&(ne(),L(d,1,1,()=>{d=null}),se()),m[0]?c?(c.p(m,h),h&1&&$(c,1)):(c=Fe(m),c.c(),$(c,1),c.m(o.parentNode,o)):c&&(ne(),L(c,1,1,()=>{c=null}),se())},i(m){l||($(d),$(s.$$.fragment,m),$(i.$$.fragment,m),$(c),l=!0)},o(m){L(d),L(s.$$.fragment,m),L(i.$$.fragment,m),L(c),l=!1},d(m){m&&(S(e),S(r),S(u),S(o)),d&&d.d(),R(s),t[9](null),R(i,m),c&&c.d(m),a=!1,f()}}}const on=50;function un(t){alert("Delete not yet supported by the server!")}function an(t,e,n){let s,r;U(t,X,_=>n(13,s=_));let i=100,u=!0,o=!0,l,a=!1;const f=Dt();U(t,f,_=>n(14,r=_)),Tt(async()=>{await f.init(),f.poll()});const d=qt(f,_=>_.sort((p,E)=>Number(E.time)-Number(p.time)).slice(0,i).reverse());function c(){l.scrollTo({left:0,top:l.scrollHeight})}function m(){if(n(0,o=l.scrollHeight-l.offsetHeight>l.scrollTop+300),!a&&l.scrollTop<=l.scrollHeight/10){const _=r.length-1;if(i>=_)return;n(2,a=!0),setTimeout(()=>{i+=on,l.scrollTop===0&&n(1,l.scrollTop=1,l),n(2,a=!1)},200)}}function h(_){const p=new Date().getTime(),E=Z.from({message:_,user:s,time:`${p}`});f.send(E)}Lt(()=>{u=l&&l.offsetHeight+l.scrollTop>l.scrollHeight-50}),Et(()=>{u&&l.scrollTo(0,l.scrollHeight)}),Mt(()=>{});const y=_=>{un(_.detail)};function v(_){J[_?"unshift":"push"](()=>{l=_,n(1,l)})}return[o,l,a,f,d,c,m,h,y,v,_=>{h(_.detail),c()}]}class fn extends P{constructor(e){super(),B(this,e,an,ln,j,{})}}function cn(t){let e,n,s,r,i,u,o,l,a;function f(c){t[2](c)}let d={maxlength:50,placeholder:"Steve Jobs",ariaLabelledBy:"name-label"};return t[0]!==void 0&&(d.value=t[0]),i=new dt({props:d}),J.push(()=>at(i,"value",f)),{c(){e=k("main"),n=k("form"),s=k("label"),s.textContent="ENTER YOUR NICKNAME",r=N(),C(i.$$.fragment),g(s,"id","name-label"),g(s,"for",""),g(s,"class","svelte-11z0eya"),g(n,"class","svelte-11z0eya"),g(e,"class","svelte-11z0eya")},m(c,m){T(c,e,m),w(e,n),w(n,s),w(n,r),O(i,n,null),o=!0,l||(a=H(n,"submit",ge(t[3])),l=!0)},p(c,[m]){const h={};!u&&m&1&&(u=!0,h.value=c[0],it(()=>u=!1)),i.$set(h)},i(c){o||($(i.$$.fragment,c),o=!0)},o(c){L(i.$$.fragment,c),o=!1},d(c){c&&S(e),R(i),l=!1,a()}}}function dn(t,e,n){let s,r;U(t,X,o=>n(0,s=o)),U(t,de,o=>n(1,r=o));function i(o){s=o,X.set(s)}return[s,r,i,o=>{s&&Xe(de,r="messages",r)}]}class mn extends P{constructor(e){super(),B(this,e,dn,cn,j,{})}}function Je(t){let e,n,s,r,i,u,o,l;return{c(){e=k("button"),n=Ce("svg"),s=Ce("path"),r=N(),i=k("span"),u=I(t[0]),g(s,"fill","currentColor"),g(s,"d",`M13.7 15.3a1 1 0 0 1-1.4 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.4
          1.4L10.42 12l3.3 3.3z`),g(n,"height","40"),g(n,"width","40"),g(n,"xmlns","http://www.w3.org/2000/svg"),g(n,"viewBox","0 0 24 24"),g(i,"class","svelte-gao1x3"),g(e,"class","svelte-gao1x3")},m(a,f){T(a,e,f),w(e,n),w(n,s),w(e,r),w(e,i),w(i,u),o||(l=H(e,"click",t[4]),o=!0)},p(a,f){f&1&&le(u,a[0])},d(a){a&&S(e),o=!1,l()}}}function gn(t){let e,n,s,r,i=t[0].length>0&&Je(t);const u=t[3].default,o=Ve(u,t,t[2],null);return{c(){e=k("nav"),i&&i.c(),n=N(),s=k("h1"),o&&o.c(),g(s,"class","svelte-gao1x3"),g(e,"class","svelte-gao1x3")},m(l,a){T(l,e,a),i&&i.m(e,null),w(e,n),w(e,s),o&&o.m(s,null),r=!0},p(l,[a]){l[0].length>0?i?i.p(l,a):(i=Je(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&&o.p&&(!r||a&4)&&Qe(o,u,l,l[2],r?Ye(u,l[2],a,null):We(l[2]),null)},i(l){r||($(o,l),r=!0)},o(l){L(o,l),r=!1},d(l){l&&S(e),i&&i.d(),o&&o.d(l)}}}function hn(t,e,n){let{$$slots:s={},$$scope:r}=e,{backText:i=""}=e;const u=Te(),o=()=>u("back");return t.$$set=l=>{"backText"in l&&n(0,i=l.backText),"$$scope"in l&&n(2,r=l.$$scope)},[i,u,r,s,o]}class mt extends P{constructor(e){super(),B(this,e,hn,gn,j,{backText:0})}}function pn(t){let e,n,s,r,i;const u=t[1].default,o=Ve(u,t,t[0],null);return{c(){e=k("div"),n=k("div"),o&&o.c(),g(n,"class","container svelte-lj276o"),g(e,"class","animation svelte-lj276o")},m(l,a){T(l,e,a),w(e,n),o&&o.m(n,null),i=!0},p(l,[a]){o&&o.p&&(!i||a&1)&&Qe(o,u,l,l[0],i?Ye(u,l[0],a,null):We(l[0]),null)},i(l){i||($(o,l),l&&q(()=>{i&&(r&&r.end(1),s=he(e,re,{}),s.start())}),i=!0)},o(l){L(o,l),s&&s.invalidate(),l&&(r=pe(e,re,{})),i=!1},d(l){l&&S(e),o&&o.d(l),l&&r&&r.end()}}}function _n(t,e,n){let{$$slots:s={},$$scope:r}=e;return t.$$set=i=>{"$$scope"in i&&n(0,r=i.$$scope)},[r,s]}class gt extends P{constructor(e){super(),B(this,e,_n,pn,j,{})}}function bn(t){let e,n;return e=new gt({props:{$$slots:{default:[vn]},$$scope:{ctx:t}}}),{c(){C(e.$$.fragment)},m(s,r){O(e,s,r),n=!0},p(s,r){const i={};r&11&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function yn(t){let e,n;return e=new gt({props:{$$slots:{default:[kn]},$$scope:{ctx:t}}}),{c(){C(e.$$.fragment)},m(s,r){O(e,s,r),n=!0},p(s,r){const i={};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function $n(t){let e;return{c(){e=I("Messages")},m(n,s){T(n,e,s)},d(n){n&&S(e)}}}function vn(t){let e,n,s,r;return e=new mt({props:{backText:"Sign Out ("+t[1]+")",$$slots:{default:[$n]},$$scope:{ctx:t}}}),e.$on("back",t[2]),s=new fn({}),{c(){C(e.$$.fragment),n=N(),C(s.$$.fragment)},m(i,u){O(e,i,u),T(i,n,u),O(s,i,u),r=!0},p(i,u){const o={};u&2&&(o.backText="Sign Out ("+i[1]+")"),u&8&&(o.$$scope={dirty:u,ctx:i}),e.$set(o)},i(i){r||($(e.$$.fragment,i),$(s.$$.fragment,i),r=!0)},o(i){L(e.$$.fragment,i),L(s.$$.fragment,i),r=!1},d(i){i&&S(n),R(e,i),R(s,i)}}}function wn(t){let e;return{c(){e=I("Sign In")},m(n,s){T(n,e,s)},d(n){n&&S(e)}}}function kn(t){let e,n,s,r,i,u;return e=new mt({props:{$$slots:{default:[wn]},$$scope:{ctx:t}}}),s=new mn({}),i=new Pt({}),{c(){C(e.$$.fragment),n=N(),C(s.$$.fragment),r=N(),C(i.$$.fragment)},m(o,l){O(e,o,l),T(o,n,l),O(s,o,l),T(o,r,l),O(i,o,l),u=!0},p(o,l){const a={};l&8&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){u||($(e.$$.fragment,o),$(s.$$.fragment,o),$(i.$$.fragment,o),u=!0)},o(o){L(e.$$.fragment,o),L(s.$$.fragment,o),L(i.$$.fragment,o),u=!1},d(o){o&&(S(n),S(r)),R(e,o),R(s,o),R(i,o)}}}function Sn(t){let e,n,s,r;const i=[yn,bn],u=[];function o(l,a){return l[0]==="settings"?0:1}return e=o(t),n=u[e]=i[e](t),{c(){n.c(),s=Le()},m(l,a){u[e].m(l,a),T(l,s,a),r=!0},p(l,[a]){let f=e;e=o(l),e===f?u[e].p(l,a):(ne(),L(u[f],1,1,()=>{u[f]=null}),se(),n=u[e],n?n.p(l,a):(n=u[e]=i[e](l),n.c()),$(n,1),n.m(s.parentNode,s))},i(l){r||($(n),r=!0)},o(l){L(n),r=!1},d(l){l&&S(s),u[e].d(l)}}}function Ln(t,e,n){let s,r;return U(t,de,u=>n(0,s=u)),U(t,X,u=>n(1,r=u)),[s,r,()=>{Xe(de,s="settings",s)}]}class Tn extends P{constructor(e){super(),B(this,e,Ln,Sn,j,{})}}document.body.innerHTML="";new Tn({target:document.body});
